# SPEC: WordCardAI — 要件（簡潔）

作成日: 2025-11-23

目的（1行）
- 英会話中に思いついた日本語を手軽に記録し、iPhone 内の生成AIで英語候補を生成して素早く単語カードを作れるようにする。

コア要件（Must-have）
1. カード集（CardCollection）を複数作成・管理できること。
2. カード一覧画面でそのカード集の単語を一覧・検索・削除・並べ替えできること。
3. カード作成ワークフロー:
   - ユーザーが日本語を入力する。
   - 生成AI（オンデバイスを想定）で英語候補を返す（デフォルト 3 件、設定で 1–5 に変更可能）。
   - ユーザーが候補を選択するか自分で編集して確定し、カード（日本語＋英語）を保存できること。
4. 保存はローカル（オフラインで動作）で行うこと。初期実装は UserDefaults + JSON を使う。
5. カードの編集・削除機能を提供すること。
6. シンプルな学習モード（フラッシュカード: 表=日本語、裏=英語）を備えること。

設定（初期値）
- AI候補数: デフォルト 3（ユーザー設定で 1–5 を選択可能）
- サーバフォールバック: 初期 OFF（オンにする場合は明示的に同意が必要）
- 永続化: UserDefaults + JSON（抽象化して将来差し替え可能）
- オフライン優先: AI候補はオンデバイスで動作することを目標とし、ネットワークがない場合は候補機能を表示しない／代替メッセージを出す

データモデル（最小）
- CardCollection
  - id: UUID
  - title: String
  - createdAt: Date

- WordCard
  - id: UUID
  - collectionId: UUID
  - japanese: String (必須)
  - english: String (必須)
  - candidates: [String] (AIが返した候補の履歴)
  - note: String? (任意)
  - tags: [String]
  - createdAt: Date

ユーザーフロー（簡潔）
1. アプリ起動 → カード集一覧表示
2. カード集作成（+）→ タップでそのカード集のカード一覧へ遷移
3. カード一覧 → ＋でカード作成画面
4. カード作成: 日本語入力 → 「候補を生成」→ 候補（1–N）を表示 → 候補を選ぶ or 編集 → 保存
5. 学習モード: ランダムにカードを表示 → 答えを見る

受け入れ基準（実際に満たすべきこと）
- カード集を作成でき、タップするとその一覧に遷移する。
- カード作成フローで日本語を入力し、AI候補（最大設定値まで）が返り、候補を選択して保存できる。
- 保存したカードは一覧に表示され、アプリ再起動後も残る。
- 学習モードで表→裏の切替ができる。

オペレーショナル制約（最低限）
- ユーザーデータは端末内に保存され、デフォルトで外部送信しない（サーバ利用は明示同意が必要）。
- AI出力は必ずユーザーのレビュー（選択/編集）を経て保存する。自動確定は行わない。

これ以外の設計方針・実装詳細・将来の拡張は省略する。必要になったら個別に追加する。
